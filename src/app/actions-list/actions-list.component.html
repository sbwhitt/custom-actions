<header class="title-bar">
  <a
    (click)="goBack();"
    class="back-btn"
  >
    <svg class="back-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path fill="#ffffff" d="M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"></path><path fill="#ffffff" d="m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"></path></g></svg>
  </a>
  <span class="title">{{ shortcutOpen ? "Shortcut settings" : "Actions" }}</span>
</header>
<div class="actions" *ngIf="!shortcutOpen; else shortcut">
  <button
    *ngFor="let s of shortcuts; index as i"
    (click)="openShortcut(i)"
    class="btn action-btn"
  >
    {{s.action.name | actionName}}
  </button>
</div>
<ng-template #shortcut>
  <div class="shortcut">
    <div class="sequence-container">
      <div *ngIf="!recording || inputSequence.length !== 0; else prompt" class="sequence">
        <span
          *ngFor="let k of recording ? inputSequence : getCurrentSequence()"
          class="key"
        >
          {{k | keyName}}
        </span>
      </div>
      <ng-template #prompt>
        <span class="prompt">
          {{promptText}}
        </span>
      </ng-template>
      <hr />
    </div>
    <div class="description">
      <span class="desc-text">{{currentShortcut?.action?.description}}</span>
    </div>
    <div *ngIf="!recording; else recordOpts" class="options">
      <button (click)="runAction();" title="Run action test" class="btn option-btn">
        <svg class="btn-icon" viewBox="-3 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>play</title><defs> </defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"> <g id="Icon-Set-Filled" sketch:type="MSLayerGroup" transform="translate(-419.000000, -571.000000)" fill="#8bfd8b"> <path d="M440.415,583.554 L421.418,571.311 C420.291,570.704 419,570.767 419,572.946 L419,597.054 C419,599.046 420.385,599.36 421.418,598.689 L440.415,586.446 C441.197,585.647 441.197,584.353 440.415,583.554" id="play" sketch:type="MSShapeGroup"> </path> </g> </g> </g></svg>
        Run
      </button>
      <button (click)="updateAction();" title="Record new input sequence" class="btn option-btn">
        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <circle cx="12" cy="12" r="10" fill="#fd6363"></circle> </g></svg>
        Update
      </button>
    </div>
    <ng-template #recordOpts>
      <div class="options">
        <button (click)="saveRecording();" title="Save input sequence" class="btn option-btn">
          <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M18.1716 1C18.702 1 19.2107 1.21071 19.5858 1.58579L22.4142 4.41421C22.7893 4.78929 23 5.29799 23 5.82843V20C23 21.6569 21.6569 23 20 23H4C2.34315 23 1 21.6569 1 20V4C1 2.34315 2.34315 1 4 1H18.1716ZM4 3C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21L5 21L5 15C5 13.3431 6.34315 12 8 12L16 12C17.6569 12 19 13.3431 19 15V21H20C20.5523 21 21 20.5523 21 20V6.82843C21 6.29799 20.7893 5.78929 20.4142 5.41421L18.5858 3.58579C18.2107 3.21071 17.702 3 17.1716 3H17V5C17 6.65685 15.6569 8 14 8H10C8.34315 8 7 6.65685 7 5V3H4ZM17 21V15C17 14.4477 16.5523 14 16 14L8 14C7.44772 14 7 14.4477 7 15L7 21L17 21ZM9 3H15V5C15 5.55228 14.5523 6 14 6H10C9.44772 6 9 5.55228 9 5V3Z" fill="#8bfd8b"></path> </g></svg>
          Save
        </button>
        <button (click)="cancelRecording();" title="Cancel recording" class="btn option-btn">
          <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <circle cx="12" cy="12" r="9" stroke="#fd6363" stroke-width="2"></circle> <path d="M18 18L6 6" stroke="#fd6363" stroke-width="2"></path> </g></svg>
          Cancel
        </button>
      </div>
    </ng-template>
  </div>
</ng-template>
